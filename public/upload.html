<html>
<head>


    <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.3.4.min.js"></script>
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">-->

    <!-- Optional theme -->
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">-->
    <link rel="stylesheet" href="myCSS.css">


    <!-- Latest compiled and minified JavaScript -->
    <!--<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>-->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.12/angular.min.js"></script>
    <!-- shim is needed to support non-HTML5 FormData browsers (IE8-9)-->
    <script src="scripts/dist/angular-file-upload-shim.min.js"></script>
    <script src="scripts/dist/angular-file-upload-all.js"></script>


    <meta charset="utf-8">

    <title>My Parse App</title>

    <script type="text/javascript">
        Parse.initialize("BZ5XSiStXyIe6ukM9iuZwPg3rOeRz8l2yQDweSNv", "zbrgcYZXlRX5XaQflW7Nn0LgKniGJsdQhXnJaA1h");
        //inject angular file upload directives and services.
        var app = angular.module('fileUpload', ['angularFileUpload']);

        app.controller('MyCtrl', ['$scope', '$upload', function ($scope, $upload) {
            $scope.$watch('files', function () {
                $scope.upload($scope.files);
            });

            $scope.upload = function (files) {
                if (files && files.length) {
                    for (var i = 0; i < files.length; i++) {
                        var file = files[i];
                        console.log(file);

                        $upload.upload({
                            headers: {
                                'X-Parse-Application-Id': 'BZ5XSiStXyIe6ukM9iuZwPg3rOeRz8l2yQDweSNv',
                                'X-Parse-REST-API-Key': 'zbrgcYZXlRX5XaQflW7Nn0LgKniGJsdQhXnJaA1h',
                                'Content-Type': 'text/plain'
                            },
                            url: 'https://api.parse.com/1/files/file.txt',
                            fields: {
                                'username': $scope.username
                            },
                            file: file
                        }).progress(function (evt) {
                            var progressPercentage = parseInt(100.0 * evt.loaded / evt.total);
                            console.log('progress: ' + progressPercentage + '% ' +
                            evt.config.file.name);
                        }).success(function (data, status, headers, config) {
                            console.log('file ' + config.file.name + 'uploaded. Response: ' +
                            JSON.stringify(data));
                        });
                    }
                }
            };
        }]);
    </script>

</head>
<body>

<div ng-app="fileUpload" ng-controller="MyCtrl">Username
    <input type="text" ng-model="username"></br></br>
    <input type="checkbox" ng-model="multiple">upload multiple file</br></br>

    <div ng-file-drop ng-file-select ng-model="files" class="drop-box"
         drag-over-class="dragover" ng-multiple="true" allow-dir="true"
         accept="text/*,application/pdf">Drop pdfs or images here or click to upload
    </div>
    <div ng-no-file-drop>File Drag/Drop is not supported for this browser</div>
    <ul>
        <li ng-repeat="f in files">{{f.name}}</li>
    </ul>
</div>


</body>
</html>
